<?xml version="1.0" encoding="utf-8"?>

<s:SparkSkin xmlns:fx="http://ns.adobe.com/mxml/2009"
			 xmlns:s="library://ns.adobe.com/flex/spark" 
			 xmlns:mx="library://ns.adobe.com/flex/mx"
			 preinitialize="preinit()"
			 minWidth="21" minHeight="21">
	
	<fx:Metadata>
		[HostComponent("project.libsys.components.IconButton")]
	</fx:Metadata>
	
	<fx:Script>
		<![CDATA[
			import spark.filters.ColorMatrixFilter;
			
			private var rLum: Number = 0.3;// 0.2225;
			private var gLum: Number = 0.3;// 0.7169;
			private var bLum: Number = 0.3;// 0.0606;
			
			[Bindable]
			private var bwMatrix:Array = [
				rLum, gLum, bLum, 0, 0, // red
				rLum, gLum, bLum, 0, 0, // green
				rLum, gLum, bLum, 0, 0, // blue
				0, 0, 0, 1, 0 // alpha
			];
			
			[Bindable]
			private var colorMatrix: ColorMatrixFilter;
			
			private function preinit() : void
			{
				colorMatrix = new ColorMatrixFilter();
				colorMatrix.matrix =  bwMatrix;
			}
			
		]]>
	</fx:Script>
	
	<!-- states -->
	<s:states>
		<s:State name="up" />
		<s:State name="over" />
		<s:State name="down" />
		<s:State name="disabled" />
	</s:states>
	
	<!-- mouse over -->
	<s:Rect id="fill" left="1" right="1" top="1" bottom="1" radiusX="2" excludeFrom="up, disabled">
		<s:fill>
			<s:LinearGradient rotation="90">
				<s:GradientEntry color.over="0xBBBDBD" color.down="0xAAAAAA" alpha="0.85" />
				<s:GradientEntry color.over="0x9FA0A1" color.down="0x929496" alpha="0.85" />
			</s:LinearGradient>
		</s:fill>
	</s:Rect>
	<s:Rect id="border" left="0" right="0" top="0" bottom="0" height="20" radiusX="2" excludeFrom="up, disabled">
		<s:stroke>
			<s:LinearGradientStroke rotation="90" weight="1">
				<s:GradientEntry color="0x000000" alpha="0.5625" alpha.down="0.6375" />
				<s:GradientEntry color="0x000000" alpha="0.75" alpha.down="0.85" />
			</s:LinearGradientStroke>
		</s:stroke>
	</s:Rect>
	
	<!-- icon -->
	<s:BitmapImage id="icon" left="2" verticalCenter="0" source="{getStyle('icon')}" filters.disabled="{[colorMatrix]}"/>
	
	<!-- label -->
	<s:Label left="22" right="2" verticalCenter="0" text="{hostComponent.label}"
			 includeInLayout="{hostComponent.label != null || hostComponent.label != ''}"/>
	
</s:SparkSkin>
